---
title: å¯åŠ¨è„šæœ¬å…¥é—¨
icon: mdi:script
createTime: 2026/02/05 00:17:50
permalink: /guide/ji-chu-zhi-shi-xue-xi/qi-dong-jiao-ben-ru-men/
foo: foo
tags:
    - Java
    - å†…å­˜
    - è„šæœ¬
---
MinecraftæœåŠ¡å™¨ä¸èƒ½åƒ~~åŸç¥~~é‚£æ ·åŒå‡»exeå¯åŠ¨ï¼Œå®ƒè·ŸJavaç‰ˆMinecraftä¸€æ ·ï¼Œéœ€è¦ä¾é ä¸€ä¸ªâ€œ::material-symbols:terminal::å¯åŠ¨å™¨â€æ¥å¯åŠ¨ã€‚è¿™ä¸ªâ€œå¯åŠ¨å™¨â€å°±æ˜¯â€œ::mdi:script::å¯åŠ¨è„šæœ¬â€ã€‚

è¿™é‡Œå±•ç¤ºäº†ä¸€ä¸ª==ç¤ºä¾‹==çš„MinecraftæœåŠ¡å™¨å¯åŠ¨è„šæœ¬ï¼Œä»¥ä¾›å¤§å®¶==å€Ÿé‰´å­¦ä¹ ==ï¼š

```shell
#!/bin/bash

# ========================================
# Minecraft æœåŠ¡å™¨å¯åŠ¨è„šæœ¬
# ========================================

# é…ç½®åŒºåŸŸ
SERVER_JAR="server.jar"           # æœåŠ¡å™¨jaræ–‡ä»¶å
MIN_RAM="2G"                       # æœ€å°å†…å­˜åˆ†é…
MAX_RAM="4G"                       # æœ€å¤§å†…å­˜åˆ†é…
JAVA_ARGS="-XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+DisableExplicitGC -XX:+AlwaysPreTouch -XX:G1NewSizePercent=30 -XX:G1MaxNewSizePercent=40 -XX:G1HeapRegionSize=8M -XX:G1ReservePercent=20 -XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 -XX:InitiatingHeapOccupancyPercent=15 -XX:G1MixedGCLiveThresholdPercent=90 -XX:G1RSetUpdatingPauseTimePercent=5 -XX:SurvivorRatio=32 -XX:+PerfDisableSharedMem -XX:MaxTenuringThreshold=1"

# é¢œè‰²è¾“å‡º
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m' # No Color

# æ£€æŸ¥Javaæ˜¯å¦å®‰è£…
check_java() {
    if ! command -v java &> /dev/null; then
        echo -e "${RED}é”™è¯¯: æœªæ‰¾åˆ°Javaï¼Œè¯·å…ˆå®‰è£…Javaï¼${NC}"
        exit 1
    fi
    
    echo -e "${GREEN}Javaç‰ˆæœ¬:${NC}"
    java -version
    echo ""
}

# æ£€æŸ¥æœåŠ¡å™¨jaræ–‡ä»¶
check_server_jar() {
    if [ ! -f "$SERVER_JAR" ]; then
        echo -e "${RED}é”™è¯¯: æœªæ‰¾åˆ°æœåŠ¡å™¨æ–‡ä»¶ $SERVER_JAR${NC}"
        echo -e "${YELLOW}è¯·å°†æœåŠ¡å™¨jaræ–‡ä»¶é‡å‘½åä¸º $SERVER_JAR æˆ–ä¿®æ”¹è„šæœ¬ä¸­çš„ SERVER_JAR å˜é‡${NC}"
        exit 1
    fi
}

# åŒæ„EULA
accept_eula() {
    if [ ! -f "eula.txt" ]; then
        echo -e "${YELLOW}é¦–æ¬¡è¿è¡Œéœ€è¦åŒæ„EULA...${NC}"
        echo "eula=true" > eula.txt
        echo -e "${GREEN}å·²è‡ªåŠ¨åŒæ„EULA${NC}"
    fi
}

# åˆ›å»ºå¯åŠ¨æ—¥å¿—ç›®å½•
create_log_dir() {
    if [ ! -d "logs" ]; then
        mkdir logs
    fi
}

# ä¸»å¯åŠ¨å‡½æ•°
start_server() {
    echo -e "${GREEN}========================================${NC}"
    echo -e "${GREEN}æ­£åœ¨å¯åŠ¨MinecraftæœåŠ¡å™¨...${NC}"
    echo -e "${GREEN}æœ€å°å†…å­˜: $MIN_RAM${NC}"
    echo -e "${GREEN}æœ€å¤§å†…å­˜: $MAX_RAM${NC}"
    echo -e "${GREEN}========================================${NC}"
    echo ""
    
    # å¯åŠ¨æœåŠ¡å™¨
    java -Xms$MIN_RAM -Xmx$MAX_RAM $JAVA_ARGS -jar $SERVER_JAR nogui
    
    # æœåŠ¡å™¨å…³é—­åçš„å¤„ç†
    EXIT_CODE=$?
    echo ""
    echo -e "${YELLOW}æœåŠ¡å™¨å·²å…³é—­ (é€€å‡ºä»£ç : $EXIT_CODE)${NC}"
    
    return $EXIT_CODE
}

# è‡ªåŠ¨é‡å¯å¾ªç¯
auto_restart() {
    while true; do
        start_server
        
        echo -e "${YELLOW}æœåŠ¡å™¨å°†åœ¨10ç§’åé‡å¯...${NC}"
        echo -e "${YELLOW}æŒ‰ Ctrl+C å–æ¶ˆé‡å¯${NC}"
        
        sleep 10
    done
}

# ä¸»ç¨‹åº
main() {
    clear
    echo -e "${GREEN}========================================${NC}"
    echo -e "${GREEN}   Minecraft æœåŠ¡å™¨å¯åŠ¨è„šæœ¬${NC}"
    echo -e "${GREEN}========================================${NC}"
    echo ""
    
    # æ‰§è¡Œæ£€æŸ¥
    check_java
    check_server_jar
    accept_eula
    create_log_dir
    
    # è¯¢é—®æ˜¯å¦å¯ç”¨è‡ªåŠ¨é‡å¯
    echo -e "${YELLOW}æ˜¯å¦å¯ç”¨è‡ªåŠ¨é‡å¯åŠŸèƒ½? (y/n)${NC}"
    read -r response
    
    if [[ "$response" =~ ^[Yy]$ ]]; then
        echo -e "${GREEN}è‡ªåŠ¨é‡å¯å·²å¯ç”¨${NC}"
        echo ""
        auto_restart
    else
        echo -e "${GREEN}å•æ¬¡è¿è¡Œæ¨¡å¼${NC}"
        echo ""
        start_server
    fi
}

# è¿è¡Œä¸»ç¨‹åº
main
```

è¿™ä¸ªå¯åŠ¨è„šæœ¬åŒ…å«äº†ä»¥ä¸‹ä¸»è¦åŠŸèƒ½:
1. é¢„è®¾2G-4Gå†…å­˜ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
2. ä½¿ç”¨`G1GC`åƒåœ¾å›æ”¶å™¨ï¼Œä¼˜åŒ–æ€§èƒ½
3. é¦–æ¬¡è¿è¡Œè‡ªåŠ¨å¤„ç†EULAåŒæ„
4. æœåŠ¡å™¨å´©æºƒåå¯è‡ªåŠ¨é‡å¯
5. è‡ªåŠ¨æ£€æŸ¥Javaå’ŒæœåŠ¡å™¨æ–‡ä»¶
6. é‡‡ç”¨å½©è‰²è¾“å‡º

æƒ³çŸ¥é“è¿™æ˜¯å¦‚ä½•åˆ¶ä½œçš„? é‚£ä¹ˆä½ å°±å¯ä»¥å¼€å§‹ä»¥ä¸‹çš„å­¦ä¹ å•¦ï¼š

## ä»€ä¹ˆæ˜¯å¯åŠ¨è„šæœ¬

å¯åŠ¨è„šæœ¬æ˜¯ä¸€ä¸ª**æ–‡æœ¬æ–‡ä»¶**, åŒ…å«äº†å¯åŠ¨MinecraftæœåŠ¡å™¨æ‰€éœ€çš„å…¨éƒ¨å‘½ä»¤ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä»½"æ“ä½œè¯´æ˜ä¹¦", å‘Šè¯‰è®¡ç®—æœºå¦‚ä½•æ­£ç¡®åœ°è¿è¡ŒæœåŠ¡å™¨ã€‚

### è„šæœ¬çš„æœ¬è´¨

å¯åŠ¨è„šæœ¬å®é™…ä¸Šå°±æ˜¯==ä¸€è¡Œæˆ–å¤šè¡Œ**å‘½ä»¤**çš„é›†åˆ==,è¿™äº›å‘½ä»¤ä¼š:
- è°ƒç”¨Javaè¿è¡Œç¯å¢ƒ(JRE/JDK)
- åˆ†é…æœåŠ¡å™¨è¿è¡Œæ‰€éœ€çš„å†…å­˜
- æŒ‡å®šæœåŠ¡å™¨æ ¸å¿ƒæ–‡ä»¶(é€šå¸¸æ˜¯.jaræ–‡ä»¶)
- è®¾ç½®å„ç§ä¼˜åŒ–å‚æ•°

## ä¸ºä»€ä¹ˆéœ€è¦å¯åŠ¨è„šæœ¬

ä½ å¯èƒ½ä¼šé—®:"æˆ‘ç›´æ¥åŒå‡»æœåŠ¡å™¨jaræ–‡ä»¶ä¸è¡Œå—?"<br>é‚£ä½ å°±åˆ«æƒ³äº†, ä½ è¦æ˜¯çœŸè¿™ä¹ˆå¹², å¯åŠ¨éƒ½ä¸ç»™ä½ å¯åŠ¨çš„, ä½ è®¡ç®—æ˜¯åŒå‡»100éä¹Ÿä¸€ç‚¹ååº”éƒ½æ²¡æœ‰ã€‚

ä½ å¯èƒ½åˆä¼šé—®:"é‚£æˆ‘ç›´æ¥ç”¨`java`å‘½ä»¤è¡Œç›´æ¥åœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨ä¸è¡Œå—?"

!!ä½ è¦æ˜¯è¿™ä¹ˆå¹²äº†é‚£æˆ‘è¿™æ–‡æ¡£è¿˜æ€ä¹ˆå†™ä¸‹å»!!å¯ä»¥,ä½†**éå¸¸ä¸æ¨è**,åŸå› å¦‚ä¸‹:

### 1. å†…å­˜åˆ†é…é—®é¢˜
å¦‚æœä½ åªç”¨äº†javaå‘½ä»¤è¡Œè€Œæ²¡åšä»»ä½•æ›´æ”¹, é‚£ä¹ˆJavaä¼šä½¿ç”¨é»˜è®¤çš„å†…å­˜è®¾ç½®(é€šå¸¸åªæœ‰å‡ ç™¾MB), è¿™å¯¹äºä¸€ä¸ªMinecraftæœåŠ¡å™¨æ¥è¯´è¿œè¿œä¸å¤Ÿ, ä¼šå¯¼è‡´:
- æœåŠ¡å™¨é¢‘ç¹å¡é¡¿
- åŒºå—åŠ è½½ç¼“æ…¢
- ç©å®¶è¿æ¥ä¸ç¨³å®š
- æœåŠ¡å™¨å´©æºƒ

### 2. æ— æ³•ä¼˜åŒ–æ€§èƒ½
å¯åŠ¨è„šæœ¬å…è®¸ä½ è®¾ç½®å„ç§JVMå‚æ•°æ¥ä¼˜åŒ–æœåŠ¡å™¨æ€§èƒ½, åŒ…æ‹¬:
- åƒåœ¾å›æ”¶ç­–ç•¥
- çº¿ç¨‹ä¼˜åŒ–
- å†…å­˜ç®¡ç†æ–¹å¼

### 3. è‡ªåŠ¨åŒ–ç®¡ç†
ä½¿ç”¨è„šæœ¬å¯ä»¥å®ç°:
- æœåŠ¡å™¨å´©æºƒåè‡ªåŠ¨é‡å¯
- å®šæ—¶å¤‡ä»½
- æ—¥å¿—è®°å½•
- æ€§èƒ½ç›‘æ§

## å¯åŠ¨è„šæœ¬çš„åŸºæœ¬æ„æˆ

ä¸€ä¸ªæœ€ç®€å•çš„å¯åŠ¨è„šæœ¬åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†:

```
java -Xms2G -Xmx2G -jar server.jar nogui
```

è®©æˆ‘ä»¬é€ä¸€æ‹†è§£:

### 1. `java`
è¿™æ˜¯è°ƒç”¨Javaè¿è¡Œç¯å¢ƒçš„å‘½ä»¤, å‘Šè¯‰ç³»ç»Ÿä½¿ç”¨Javaæ¥è¿è¡Œåé¢çš„ç¨‹åºã€‚

### 2. `-Xms2G`
è®¾ç½®**æœ€å°å†…å­˜**(Initial memory), è¿™é‡Œæ˜¯2GBã€‚
- `Xms` = X Memory Start
- `2G` = 2 Gigabytes(2åƒå…†å­—èŠ‚)

### 3. `-Xmx2G`
è®¾ç½®**æœ€å¤§å†…å­˜**(Maximum memory), è¿™é‡Œæ˜¯2GBã€‚
- `Xmx` = X Memory maXimum
- `2G` = 2 Gigabytes

**é‡è¦æç¤º**: å»ºè®®å°†Xmså’ŒXmxè®¾ç½®ä¸ºç›¸åŒçš„å€¼, è¿™æ ·å¯ä»¥é¿å…JavaåŠ¨æ€è°ƒæ•´å†…å­˜å¸¦æ¥çš„æ€§èƒ½æŸå¤±ã€‚

### 4. `-jar server.jar`
æŒ‡å®šè¦è¿è¡Œçš„æœåŠ¡å™¨æ ¸å¿ƒæ–‡ä»¶ã€‚
- `-jar` è¡¨ç¤ºè¿è¡Œä¸€ä¸ªjaræ ¼å¼çš„ç¨‹åº
- `server.jar` æ˜¯ä½ çš„æœåŠ¡å™¨æ ¸å¿ƒæ–‡ä»¶å(éœ€è¦æ ¹æ®å®é™…æ–‡ä»¶åä¿®æ”¹)

### 5. `nogui`
è¡¨ç¤ºä¸å¯åŠ¨å›¾å½¢åŒ–ç•Œé¢, ä½¿ç”¨å‘½ä»¤è¡Œæ¨¡å¼è¿è¡Œã€‚
- å›¾å½¢ç•Œé¢ä¼šæ¶ˆè€—é¢å¤–çš„å†…å­˜å’ŒCPUèµ„æº
- å¤§å¤šæ•°æœåŠ¡å™¨éƒ½ä½¿ç”¨noguiæ¨¡å¼

## ä¸åŒæ“ä½œç³»ç»Ÿçš„è„šæœ¬æ ¼å¼

### Windowsç³»ç»Ÿ

**æ–‡ä»¶æ ¼å¼**: `.bat` æˆ– `.cmd`

**åŸºç¡€è„šæœ¬ç¤ºä¾‹** (`start.bat`):
```batch
@echo off
title MinecraftæœåŠ¡å™¨
java -Xms4G -Xmx4G -jar server.jar nogui
pause
```

**è¯¦ç»†è¯´æ˜**:
- `@echo off`: å…³é—­å‘½ä»¤å›æ˜¾, è®©çª—å£æ›´ç®€æ´
- `title MinecraftæœåŠ¡å™¨`: è®¾ç½®çª—å£æ ‡é¢˜
- `pause`: æœåŠ¡å™¨å…³é—­åæš‚åœ, æ–¹ä¾¿æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

**åˆ›å»ºæ–¹æ³•**:
1. å³é”®æ¡Œé¢ â†’ æ–°å»º â†’ æ–‡æœ¬æ–‡æ¡£
2. å°†ä¸Šè¿°å†…å®¹ç²˜è´´è¿›å»
3. å¦å­˜ä¸º â†’ æ–‡ä»¶åæ”¹ä¸º`start.bat`, æ–‡ä»¶ç±»å‹é€‰æ‹©"æ‰€æœ‰æ–‡ä»¶"
4. ç¡®ä¿æ–‡ä»¶æ‰©å±•åæ˜¯`.bat`è€Œä¸æ˜¯`.bat.txt`

---

### Linuxç³»ç»Ÿ

**æ–‡ä»¶æ ¼å¼**: `.sh`

**åŸºç¡€è„šæœ¬ç¤ºä¾‹** (`start.sh`):
```bash
#!/bin/bash
java -Xms4G -Xmx4G -jar server.jar nogui
```

**è¯¦ç»†è¯´æ˜**:
- `#!/bin/bash`: å£°æ˜è¿™æ˜¯ä¸€ä¸ªbashè„šæœ¬(å¿…é¡»æ”¾åœ¨ç¬¬ä¸€è¡Œ)

**åˆ›å»ºæ–¹æ³•**:
```bash
# åˆ›å»ºè„šæœ¬æ–‡ä»¶
nano start.sh

# ç²˜è´´å†…å®¹å,æŒ‰Ctrl+X,ç„¶åY,ç„¶åEnterä¿å­˜

# ç»™äºˆæ‰§è¡Œæƒé™
chmod +x start.sh

# è¿è¡Œè„šæœ¬
./start.sh
```

---

### macOSç³»ç»Ÿ

**æ–‡ä»¶æ ¼å¼**: `.command` æˆ– `.sh`

**åŸºç¡€è„šæœ¬ç¤ºä¾‹** (`start.command`):
```bash
#!/bin/bash
cd "$(dirname "$0")"
java -Xms4G -Xmx4G -jar server.jar nogui
```

**è¯¦ç»†è¯´æ˜**:
- `cd "$(dirname "$0")"`: è‡ªåŠ¨åˆ‡æ¢åˆ°è„šæœ¬æ‰€åœ¨ç›®å½•

**åˆ›å»ºæ–¹æ³•**:
```bash
# åˆ›å»ºå¹¶ç¼–è¾‘æ–‡ä»¶
nano start.command

# ç²˜è´´å†…å®¹,ä¿å­˜

# ç»™äºˆæ‰§è¡Œæƒé™
chmod +x start.command

# åŒå‡»è¿è¡Œæˆ–åœ¨ç»ˆç«¯ä¸­è¿è¡Œ
./start.command
```

## JVMå‚æ•°è¯¦è§£

JVM(Java Virtual Machine,Javaè™šæ‹Ÿæœº)å‚æ•°æ§åˆ¶ç€Javaç¨‹åºçš„è¿è¡Œæ–¹å¼ã€‚ä»¥ä¸‹æ˜¯MinecraftæœåŠ¡å™¨å¸¸ç”¨çš„å‚æ•°:

### å†…å­˜ç›¸å…³å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `-Xms` | åˆå§‹å †å†…å­˜å¤§å° | `-Xms4G` |
| `-Xmx` | æœ€å¤§å †å†…å­˜å¤§å° | `-Xmx4G` |
| `-Xmn` | æ–°ç”Ÿä»£å†…å­˜å¤§å° | `-Xmn1G` |
| `-Xss` | çº¿ç¨‹å †æ ˆå¤§å° | `-Xss1M` |

**å†…å­˜å•ä½è¯´æ˜**:
- `K` æˆ– `k` = KB(åƒå­—èŠ‚)
- `M` æˆ– `m` = MB(å…†å­—èŠ‚)
- `G` æˆ– `g` = GB(åƒå…†å­—èŠ‚)

ç¤ºä¾‹: `2048M` = `2G` = 2048å…†å­—èŠ‚ = 2åƒå…†å­—èŠ‚

### åƒåœ¾å›æ”¶å™¨å‚æ•°

åƒåœ¾å›æ”¶å™¨(GC)è´Ÿè´£æ¸…ç†ä¸å†ä½¿ç”¨çš„å†…å­˜ã€‚ä¸åŒçš„GCæœ‰ä¸åŒçš„ç‰¹ç‚¹:

#### 1. G1GC(æ¨èç”¨äºå¤§å¤šæ•°æœåŠ¡å™¨)
```
-XX:+UseG1GC
```
**ä¼˜ç‚¹**: å¹³è¡¡æ€§èƒ½å’Œæš‚åœæ—¶é—´,é€‚åˆä¸­å¤§å‹æœåŠ¡å™¨

#### 2. ZGC(æ¨èç”¨äºå¤§å‹æœåŠ¡å™¨,Java 11+)
```
-XX:+UseZGC
```
**ä¼˜ç‚¹**: è¶…ä½å»¶è¿Ÿ,é€‚åˆå¤§å‹æœåŠ¡å™¨å’Œéœ€è¦æè‡´æµç•…åº¦çš„åœºæ™¯

#### 3. Shenandoah GC(Java 12+)
```
-XX:+UseShenandoahGC
```
**ä¼˜ç‚¹**: ä½æš‚åœæ—¶é—´,ä¸ZGCç±»ä¼¼

### æ€§èƒ½ä¼˜åŒ–å‚æ•°

```bash
# å¯ç”¨å¤§é¡µé¢å†…å­˜æ”¯æŒ
-XX:+UseLargePages

# å¯ç”¨NUMAä¼˜åŒ–(å¤šCPUæœåŠ¡å™¨)
-XX:+UseNUMA

# ç¦ç”¨æ˜¾å¼GCè°ƒç”¨
-XX:+DisableExplicitGC

# ä¼˜åŒ–å­—ç¬¦ä¸²å»é‡
-XX:+UseStringDeduplication

# è®¾ç½®GCçº¿ç¨‹æ•°
-XX:ParallelGCThreads=4
```

## å†…å­˜åˆ†é…æŒ‡å—

å¦‚ä½•å†³å®šç»™æœåŠ¡å™¨åˆ†é…å¤šå°‘å†…å­˜?è¿™æ˜¯æ–°æ‰‹æœä¸»æœ€å¸¸é—®çš„é—®é¢˜ã€‚

### åŸºç¡€åˆ†é…å»ºè®®

| ç©å®¶æ•°é‡ | æ’ä»¶æ•°é‡ | æ¨èå†…å­˜ | æœ€ä½å†…å­˜ |
|----------|----------|----------|----------|
| 1-5äºº | å°‘é‡(0-10) | 2-3GB | 1GB |
| 5-10äºº | é€‚ä¸­(10-30) | 3-4GB | 2GB |
| 10-20äºº | è¾ƒå¤š(30-50) | 4-6GB | 3GB |
| 20-50äºº | å¾ˆå¤š(50+) | 6-10GB | 4GB |
| 50+äºº | å¤§é‡ | 10-16GB+ | 8GB |

### å½±å“å†…å­˜éœ€æ±‚çš„å› ç´ 

1. **ç©å®¶æ•°é‡**: æ¯ä¸ªç©å®¶å¤§çº¦éœ€è¦50-100MB
2. **ä¸–ç•Œå¤§å°**: é¢„ç”Ÿæˆçš„ä¸–ç•Œè¶Šå¤§,éœ€è¦çš„å†…å­˜è¶Šå¤š
3. **æ’ä»¶æ•°é‡å’Œç±»å‹**: 
   - ç®€å•æ’ä»¶(å¦‚ä¼ é€ã€æƒé™): 10-50MB
   - å¤æ‚æ’ä»¶(å¦‚ç»æµç³»ç»Ÿã€RPG): 50-200MB
   - å¤§å‹æ’ä»¶(å¦‚åœ°çš®ã€å°æ¸¸æˆ): 200MB+
4. **MODæ•°é‡**: æ¯ä¸ªMODå¹³å‡éœ€è¦50-500MBä¸ç­‰
5. **è§†è·è®¾ç½®**: è§†è·æ¯å¢åŠ 1,å†…å­˜éœ€æ±‚å¢åŠ çº¦10-15%

### å†…å­˜åˆ†é…çš„é»„é‡‘æ³•åˆ™

1. **ä¸è¦åˆ†é…è¶…è¿‡ç³»ç»Ÿæ€»å†…å­˜çš„70%**
   - ä¾‹: 8GBç³»ç»Ÿå†…å­˜ â†’ æœ€å¤šåˆ†é…5-6GBç»™æœåŠ¡å™¨
   
2. **ä¸ºæ“ä½œç³»ç»Ÿé¢„ç•™è‡³å°‘1-2GBå†…å­˜**
   - Windowséœ€è¦æ›´å¤š(2-3GB)
   - Linuxå¯ä»¥æ›´å°‘(1-2GB)

3. **Xmså’ŒXmxè®¾ç½®ç›¸åŒå€¼**
   - å¥½: `-Xms4G -Xmx4G`
   - å·®: `-Xms2G -Xmx4G`

4. **ä¸æ˜¯è¶Šå¤§è¶Šå¥½**
   - è¿‡å¤šå†…å­˜ä¼šå¯¼è‡´GCæš‚åœæ—¶é—´è¿‡é•¿
   - ä¸€èˆ¬ä¸å»ºè®®è¶…è¿‡16GB(é™¤éæ˜¯è¶…å¤§å‹æœåŠ¡å™¨)

## ä¼˜åŒ–å¯åŠ¨å‚æ•°

ä»¥ä¸‹æ˜¯é’ˆå¯¹ä¸åŒåœºæ™¯çš„ä¼˜åŒ–å¯åŠ¨å‚æ•°é…ç½®ã€‚

### é€‚ç”¨äºå°å‹æœåŠ¡å™¨(1-10äºº)

**Windowsç‰ˆæœ¬** (`start.bat`):
```batch
@echo off
title Minecraftå°å‹æœåŠ¡å™¨
java -Xms2G -Xmx2G ^
-XX:+UseG1GC ^
-XX:+ParallelRefProcEnabled ^
-XX:MaxGCPauseMillis=200 ^
-XX:+UnlockExperimentalVMOptions ^
-XX:+DisableExplicitGC ^
-XX:G1NewSizePercent=30 ^
-XX:G1MaxNewSizePercent=40 ^
-XX:G1HeapRegionSize=8M ^
-XX:G1ReservePercent=20 ^
-XX:G1HeapWastePercent=5 ^
-XX:G1MixedGCCountTarget=4 ^
-XX:InitiatingHeapOccupancyPercent=15 ^
-XX:G1MixedGCLiveThresholdPercent=90 ^
-XX:SurvivorRatio=32 ^
-jar server.jar nogui
pause
```

**Linux/Macç‰ˆæœ¬** (`start.sh`):
```bash
#!/bin/bash
java -Xms2G -Xmx2G \
-XX:+UseG1GC \
-XX:+ParallelRefProcEnabled \
-XX:MaxGCPauseMillis=200 \
-XX:+UnlockExperimentalVMOptions \
-XX:+DisableExplicitGC \
-XX:G1NewSizePercent=30 \
-XX:G1MaxNewSizePercent=40 \
-XX:G1HeapRegionSize=8M \
-XX:G1ReservePercent=20 \
-XX:G1HeapWastePercent=5 \
-XX:G1MixedGCCountTarget=4 \
-XX:InitiatingHeapOccupancyPercent=15 \
-XX:G1MixedGCLiveThresholdPercent=90 \
-XX:SurvivorRatio=32 \
-jar server.jar nogui
```

---

### é€‚ç”¨äºä¸­å‹æœåŠ¡å™¨(10-30äºº)

**Windowsç‰ˆæœ¬**:
```batch
@echo off
title Minecraftä¸­å‹æœåŠ¡å™¨
java -Xms4G -Xmx4G ^
-XX:+UseG1GC ^
-XX:+ParallelRefProcEnabled ^
-XX:MaxGCPauseMillis=200 ^
-XX:+UnlockExperimentalVMOptions ^
-XX:+DisableExplicitGC ^
-XX:+AlwaysPreTouch ^
-XX:G1NewSizePercent=40 ^
-XX:G1MaxNewSizePercent=50 ^
-XX:G1HeapRegionSize=16M ^
-XX:G1ReservePercent=15 ^
-XX:G1HeapWastePercent=5 ^
-XX:G1MixedGCCountTarget=4 ^
-XX:InitiatingHeapOccupancyPercent=20 ^
-XX:G1MixedGCLiveThresholdPercent=90 ^
-XX:G1RSetUpdatingPauseTimePercent=5 ^
-XX:SurvivorRatio=32 ^
-XX:+PerfDisableSharedMem ^
-XX:MaxTenuringThreshold=1 ^
-jar server.jar nogui
pause
```

---

### é€‚ç”¨äºå¤§å‹æœåŠ¡å™¨(30+äºº, æ¨èä½¿ç”¨ZGC)

**å‰ææ¡ä»¶**: Java 17æˆ–æ›´é«˜ç‰ˆæœ¬

**Windowsç‰ˆæœ¬**:
```batch
@echo off
title Minecraftå¤§å‹æœåŠ¡å™¨
java -Xms8G -Xmx8G ^
-XX:+UseZGC ^
-XX:+UnlockExperimentalVMOptions ^
-XX:+DisableExplicitGC ^
-XX:+AlwaysPreTouch ^
-XX:+ParallelRefProcEnabled ^
-XX:-ZUncommit ^
-XX:ZUncommitDelay=300 ^
-XX:ZCollectionInterval=5 ^
-XX:ZAllocationSpikeTolerance=2.0 ^
-XX:+UseLargePages ^
-XX:+PerfDisableSharedMem ^
-jar server.jar nogui
pause
```

---

### Aikar's Flags(ç¤¾åŒºæ¨èå‚æ•°)

Aikaræ˜¯PaperæœåŠ¡ç«¯çš„å¼€å‘è€…, ä»–æä¾›äº†ä¸€å¥—å¹¿å—å¥½è¯„çš„å¯åŠ¨å‚æ•°:

**é€‚ç”¨äºJava 8-10**:
```bash
java -Xms10G -Xmx10G \
-XX:+UseG1GC \
-XX:+ParallelRefProcEnabled \
-XX:MaxGCPauseMillis=200 \
-XX:+UnlockExperimentalVMOptions \
-XX:+DisableExplicitGC \
-XX:+AlwaysPreTouch \
-XX:G1NewSizePercent=30 \
-XX:G1MaxNewSizePercent=40 \
-XX:G1HeapRegionSize=8M \
-XX:G1ReservePercent=20 \
-XX:G1HeapWastePercent=5 \
-XX:G1MixedGCCountTarget=4 \
-XX:InitiatingHeapOccupancyPercent=15 \
-XX:G1MixedGCLiveThresholdPercent=90 \
-XX:G1RSetUpdatingPauseTimePercent=5 \
-XX:SurvivorRatio=32 \
-XX:+PerfDisableSharedMem \
-XX:MaxTenuringThreshold=1 \
-jar server.jar nogui
```

**é€‚ç”¨äºJava 11+**:
```bash
java -Xms10G -Xmx10G \
-XX:+UseG1GC \
-XX:+ParallelRefProcEnabled \
-XX:MaxGCPauseMillis=200 \
-XX:+UnlockExperimentalVMOptions \
-XX:+DisableExplicitGC \
-XX:+AlwaysPreTouch \
-XX:G1NewSizePercent=40 \
-XX:G1MaxNewSizePercent=50 \
-XX:G1HeapRegionSize=16M \
-XX:G1ReservePercent=15 \
-XX:G1HeapWastePercent=5 \
-XX:G1MixedGCCountTarget=4 \
-XX:InitiatingHeapOccupancyPercent=20 \
-XX:G1MixedGCLiveThresholdPercent=90 \
-XX:G1RSetUpdatingPauseTimePercent=5 \
-XX:SurvivorRatio=32 \
-XX:+PerfDisableSharedMem \
-XX:MaxTenuringThreshold=1 \
-jar server.jar nogui
```

## å®ç”¨è„šæœ¬ç¤ºä¾‹

### 1. è‡ªåŠ¨é‡å¯è„šæœ¬

å½“æœåŠ¡å™¨å´©æºƒæ—¶è‡ªåŠ¨é‡å¯:

**Windowsç‰ˆæœ¬** (`start_loop.bat`):
```batch
@echo off
title MinecraftæœåŠ¡å™¨ - è‡ªåŠ¨é‡å¯
:start
echo æ­£åœ¨å¯åŠ¨æœåŠ¡å™¨...
echo å¯åŠ¨æ—¶é—´: %date% %time%
java -Xms4G -Xmx4G -jar server.jar nogui
echo.
echo æœåŠ¡å™¨å·²å…³é—­!
echo å…³é—­æ—¶é—´: %date% %time%
echo.
echo 10ç§’åè‡ªåŠ¨é‡å¯...
timeout /t 10
goto start
```

**Linuxç‰ˆæœ¬** (`start_loop.sh`):
```bash
#!/bin/bash
while true; do
    echo "æ­£åœ¨å¯åŠ¨æœåŠ¡å™¨..."
    echo "å¯åŠ¨æ—¶é—´: $(date)"
    java -Xms4G -Xmx4G -jar server.jar nogui
    echo ""
    echo "æœåŠ¡å™¨å·²å…³é—­!"
    echo "å…³é—­æ—¶é—´: $(date)"
    echo ""
    echo "10ç§’åè‡ªåŠ¨é‡å¯..."
    sleep 10
done
```

---

### 2. å¸¦æ—¥å¿—è®°å½•çš„è„šæœ¬

è®°å½•æœåŠ¡å™¨è¿è¡Œæ—¥å¿—:

**Windowsç‰ˆæœ¬**:
```batch
@echo off
title MinecraftæœåŠ¡å™¨ - æ—¥å¿—è®°å½•
set LOG_DIR=logs
if not exist %LOG_DIR% mkdir %LOG_DIR%
set LOG_FILE=%LOG_DIR%\server_%date:~0,4%%date:~5,2%%date:~8,2%_%time:~0,2%%time:~3,2%%time:~6,2%.log

echo å¯åŠ¨æœåŠ¡å™¨,æ—¥å¿—æ–‡ä»¶: %LOG_FILE%
java -Xms4G -Xmx4G -jar server.jar nogui 2>&1 | tee %LOG_FILE%
pause
```

**Linuxç‰ˆæœ¬**:
```bash
#!/bin/bash
LOG_DIR="logs"
mkdir -p $LOG_DIR
LOG_FILE="$LOG_DIR/server_$(date +%Y%m%d_%H%M%S).log"

echo "å¯åŠ¨æœåŠ¡å™¨,æ—¥å¿—æ–‡ä»¶: $LOG_FILE"
java -Xms4G -Xmx4G -jar server.jar nogui 2>&1 | tee $LOG_FILE
```

---

### 3. æ£€æµ‹Javaç‰ˆæœ¬çš„è„šæœ¬

è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨æ­£ç¡®çš„Javaç‰ˆæœ¬:

**Windowsç‰ˆæœ¬**:
```batch
@echo off
title MinecraftæœåŠ¡å™¨ - Javaç‰ˆæœ¬æ£€æµ‹

echo æ£€æµ‹Javaç‰ˆæœ¬...
java -version 2>&1 | findstr /i "version" > java_version.txt
set /p JAVA_VER=<java_version.txt
del java_version.txt

echo å½“å‰Javaç‰ˆæœ¬: %JAVA_VER%
echo.

REM æ£€æŸ¥æ˜¯å¦å®‰è£…äº†Java
java -version >nul 2>&1
if errorlevel 1 (
    echo é”™è¯¯: æœªæ£€æµ‹åˆ°Java!
    echo è¯·å…ˆå®‰è£…Java: https://adoptium.net/
    pause
    exit
)

echo Javaæ£€æµ‹é€šè¿‡,å¯åŠ¨æœåŠ¡å™¨...
java -Xms4G -Xmx4G -jar server.jar nogui
pause
```

**Linuxç‰ˆæœ¬**:
```bash
#!/bin/bash

echo "æ£€æµ‹Javaç‰ˆæœ¬..."
if ! command -v java &> /dev/null; then
    echo "é”™è¯¯: æœªæ£€æµ‹åˆ°Java!"
    echo "è¯·å…ˆå®‰è£…Java"
    exit 1
fi

JAVA_VER=$(java -version 2>&1 | head -n 1)
echo "å½“å‰Javaç‰ˆæœ¬: $JAVA_VER"
echo ""

echo "Javaæ£€æµ‹é€šè¿‡,å¯åŠ¨æœåŠ¡å™¨..."
java -Xms4G -Xmx4G -jar server.jar nogui
```

---

### 4. å¸¦æ€§èƒ½ç›‘æ§çš„è„šæœ¬

**Linuxç‰ˆæœ¬** (éœ€è¦å®‰è£…screen):
```bash
#!/bin/bash

# æœåŠ¡å™¨é…ç½®
SERVER_JAR="server.jar"
MEMORY="4G"
SCREEN_NAME="minecraft"

# æ£€æŸ¥screenæ˜¯å¦å®‰è£…
if ! command -v screen &> /dev/null; then
    echo "é”™è¯¯: æœªå®‰è£…screen"
    echo "è¯·è¿è¡Œ: sudo apt-get install screen"
    exit 1
fi

# æ£€æŸ¥æ˜¯å¦å·²ç»åœ¨è¿è¡Œ
if screen -list | grep -q "$SCREEN_NAME"; then
    echo "æœåŠ¡å™¨å·²ç»åœ¨è¿è¡Œä¸­!"
    echo "ä½¿ç”¨ 'screen -r $SCREEN_NAME' è¿æ¥åˆ°æœåŠ¡å™¨æ§åˆ¶å°"
    exit 1
fi

# å¯åŠ¨æœåŠ¡å™¨
echo "åœ¨screenä¼šè¯ä¸­å¯åŠ¨æœåŠ¡å™¨..."
screen -dmS $SCREEN_NAME java -Xms$MEMORY -Xmx$MEMORY \
    -XX:+UseG1GC \
    -XX:+ParallelRefProcEnabled \
    -XX:MaxGCPauseMillis=200 \
    -XX:+UnlockExperimentalVMOptions \
    -jar $SERVER_JAR nogui

echo "æœåŠ¡å™¨å·²å¯åŠ¨!"
echo "ä½¿ç”¨ 'screen -r $SCREEN_NAME' è¿æ¥åˆ°æœåŠ¡å™¨æ§åˆ¶å°"
echo "æŒ‰ Ctrl+A ç„¶åæŒ‰ D å¯ä»¥æ–­å¼€è¿æ¥(æœåŠ¡å™¨ç»§ç»­è¿è¡Œ)"
```

---

## å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: "æ— æ³•è¯†åˆ«'java'å‘½ä»¤"

**ç—‡çŠ¶**:
```
'java' ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤,ä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºæˆ–æ‰¹å¤„ç†æ–‡ä»¶ã€‚
```

**åŸå› **: æ²¡æœ‰å®‰è£…Javaæˆ–Javaæ²¡æœ‰æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡

**è§£å†³æ–¹æ¡ˆ**:

1. **ä¸‹è½½å¹¶å®‰è£…Java**:
   - æ¨èä½¿ç”¨ [Adoptium (Eclipse Temurin)](https://adoptium.net/)
   - æˆ–è€…ä½¿ç”¨ [Oracle Java](https://www.oracle.com/java/technologies/downloads/)

2. **éªŒè¯å®‰è£…**:
   æ‰“å¼€å‘½ä»¤æç¤ºç¬¦/ç»ˆç«¯,è¾“å…¥:
   ```bash
   java -version
   ```
   åº”è¯¥æ˜¾ç¤ºJavaç‰ˆæœ¬ä¿¡æ¯

3. **æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡**(Windows):
   - å³é”®"æ­¤ç”µè„‘" â†’ å±æ€§ â†’ é«˜çº§ç³»ç»Ÿè®¾ç½® â†’ ç¯å¢ƒå˜é‡
   - åœ¨ç³»ç»Ÿå˜é‡ä¸­æ‰¾åˆ°`Path`,ç‚¹å‡»ç¼–è¾‘
   - æ·»åŠ Javaçš„binç›®å½•è·¯å¾„(ä¾‹: `C:\Program Files\Java\jdk-17\bin`)

---

### é—®é¢˜2: "æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±»"

**ç—‡çŠ¶**:
```
Error: Could not find or load main class
```

**åŸå› **: 
- æœåŠ¡å™¨jaræ–‡ä»¶æŸå
- jaræ–‡ä»¶åæ‹¼å†™é”™è¯¯
- jaræ–‡ä»¶ä¸åœ¨æ­£ç¡®çš„ç›®å½•

**è§£å†³æ–¹æ¡ˆ**:

1. **æ£€æŸ¥æ–‡ä»¶å**: ç¡®ä¿è„šæœ¬ä¸­çš„jaræ–‡ä»¶åä¸å®é™…æ–‡ä»¶åå®Œå…¨ä¸€è‡´
   ```batch
   REM å¦‚æœä½ çš„æ–‡ä»¶å« paper-1.20.4.jar
   java -Xms4G -Xmx4G -jar paper-1.20.4.jar nogui
   ```

2. **æ£€æŸ¥æ–‡ä»¶ä½ç½®**: ç¡®ä¿jaræ–‡ä»¶å’Œå¯åŠ¨è„šæœ¬åœ¨åŒä¸€ç›®å½•

3. **é‡æ–°ä¸‹è½½jaræ–‡ä»¶**: æ–‡ä»¶å¯èƒ½å·²æŸå

---

### é—®é¢˜3: "å†…å­˜ä¸è¶³" / OutOfMemoryError

**ç—‡çŠ¶**:
```
java.lang.OutOfMemoryError: Java heap space
```

**åŸå› **: åˆ†é…çš„å†…å­˜ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:

1. **å¢åŠ å†…å­˜åˆ†é…**:
   ```bash
   REM å°†2Gæ”¹ä¸º4Gæˆ–æ›´é«˜
   java -Xms4G -Xmx4G -jar server.jar nogui
   ```

2. **æ£€æŸ¥ç³»ç»Ÿå¯ç”¨å†…å­˜**:
   - Windows: ä»»åŠ¡ç®¡ç†å™¨ â†’ æ€§èƒ½ â†’ å†…å­˜
   - Linux: `free -h`

3. **ç¡®ä¿ä¸è¶…è¿‡ç³»ç»Ÿæ€»å†…å­˜çš„70%**

---

### é—®é¢˜4: æœåŠ¡å™¨é¢‘ç¹å¡é¡¿/TPSä½

**ç—‡çŠ¶**: 
- ç©å®¶ç§»åŠ¨å¡é¡¿
- æ–¹å—æ”¾ç½®å»¶è¿Ÿ
- TPS(æ¯ç§’åˆ»æ•°)ä½äº20

**å¯èƒ½åŸå› å’Œè§£å†³æ–¹æ¡ˆ**:

1. **å†…å­˜ä¸è¶³**:
   - å¢åŠ Xmså’ŒXmxå€¼

2. **åƒåœ¾å›æ”¶å‚æ•°ä¸å½“**:
   - ä½¿ç”¨æœ¬æ•™ç¨‹æ¨èçš„ä¼˜åŒ–å‚æ•°
   - å°è¯•åˆ‡æ¢åˆ°ZGC(Java 17+)

3. **æ’ä»¶/MODè¿‡å¤š**:
   - ä½¿ç”¨timingsæˆ–sparkåˆ†ææ€§èƒ½
   - ç§»é™¤ä¸å¿…è¦çš„æ’ä»¶
   - ä¼˜åŒ–æ’ä»¶é…ç½®

4. **ä¸–ç•Œè¿‡å¤§**:
   - ä½¿ç”¨WorldBorderé™åˆ¶ä¸–ç•Œå¤§å°
   - å®šæœŸæ¸…ç†æœªä½¿ç”¨çš„åŒºå—

---

### é—®é¢˜5: å¯åŠ¨åç«‹å³å…³é—­

**ç—‡çŠ¶**: åŒå‡»è„šæœ¬åçª—å£ä¸€é—ªè€Œè¿‡

**è§£å†³æ–¹æ¡ˆ**:

1. **åœ¨è„šæœ¬æœ«å°¾æ·»åŠ pause**(Windows):
   ```batch
   java -Xms4G -Xmx4G -jar server.jar nogui
   pause
   ```

2. **æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶**: 
   - æ‰“å¼€`logs/latest.log`æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

3. **å¸¸è§åŸå› **:
   - æ²¡æœ‰åŒæ„EULA: ç¼–è¾‘`eula.txt`,å°†`eula=false`æ”¹ä¸º`eula=true`
   - ç«¯å£è¢«å ç”¨: ä¿®æ”¹`server.properties`ä¸­çš„ç«¯å£å·
   - Javaç‰ˆæœ¬ä¸å…¼å®¹: å‡çº§æˆ–é™çº§Javaç‰ˆæœ¬

---

### é—®é¢˜6: "Unsupported class file major version"

**ç—‡çŠ¶**:
```
Unsupported class file major version XX
```

**åŸå› **: Javaç‰ˆæœ¬è¿‡ä½,ä¸æ”¯æŒè¯¥æœåŠ¡å™¨ç‰ˆæœ¬

**è§£å†³æ–¹æ¡ˆ**:

ä¸åŒMinecraftç‰ˆæœ¬éœ€è¦çš„æœ€ä½Javaç‰ˆæœ¬:
- Minecraft 1.16åŠä»¥ä¸‹: Java 8+
- Minecraft 1.17: Java 16+
- Minecraft 1.18-1.20.4: Java 17+
- Minecraft 1.20.5+: Java 21+

å‡çº§åˆ°å¯¹åº”æˆ–æ›´é«˜ç‰ˆæœ¬çš„Javaå³å¯ã€‚

## è¿›é˜¶æŠ€å·§

### 1. ä½¿ç”¨screenæˆ–tmuxä¿æŒæœåŠ¡å™¨åå°è¿è¡Œ(Linux)

**å®‰è£…screen**:
```bash
sudo apt-get install screen  # Ubuntu/Debian
sudo yum install screen       # CentOS/RHEL
```

**ä½¿ç”¨æ–¹æ³•**:
```bash
# åˆ›å»ºæ–°çš„screenä¼šè¯å¹¶å¯åŠ¨æœåŠ¡å™¨
screen -S minecraft
./start.sh

# æŒ‰ Ctrl+A ç„¶åæŒ‰ D æ¥æ–­å¼€è¿æ¥(æœåŠ¡å™¨ç»§ç»­è¿è¡Œ)

# é‡æ–°è¿æ¥åˆ°ä¼šè¯
screen -r minecraft

# åˆ—å‡ºæ‰€æœ‰screenä¼šè¯
screen -ls
```

---

### 2. å®šæ—¶è‡ªåŠ¨å¤‡ä»½

**Linuxç‰ˆæœ¬** (ä½¿ç”¨cron):

åˆ›å»ºå¤‡ä»½è„šæœ¬ `backup.sh`:
```bash
#!/bin/bash
BACKUP_DIR="/home/minecraft/backups"
SERVER_DIR="/home/minecraft/server"
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p $BACKUP_DIR
tar -czf $BACKUP_DIR/backup_$DATE.tar.gz -C $SERVER_DIR world world_nether world_the_end

# åªä¿ç•™æœ€è¿‘7å¤©çš„å¤‡ä»½
find $BACKUP_DIR -name "backup_*.tar.gz" -mtime +7 -delete

echo "å¤‡ä»½å®Œæˆ: backup_$DATE.tar.gz"
```

è®¾ç½®å®šæ—¶ä»»åŠ¡:
```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œ(æ¯å¤©å‡Œæ™¨3ç‚¹è‡ªåŠ¨å¤‡ä»½)
0 3 * * * /home/minecraft/backup.sh
```

---

### 3. æ€§èƒ½ç›‘æ§å’Œåˆ†æ

**å®‰è£…Sparkæ’ä»¶** (å¼ºçƒˆæ¨è):

1. ä¸‹è½½Spark: https://spark.lucko.me/download
2. å°†jaræ–‡ä»¶æ”¾å…¥`plugins`æ–‡ä»¶å¤¹
3. é‡å¯æœåŠ¡å™¨

**ä½¿ç”¨æ–¹æ³•**:
```
# åœ¨æ¸¸æˆä¸­æˆ–æ§åˆ¶å°è¾“å…¥
/spark profiler start

# ç­‰å¾…30-60ç§’å
/spark profiler stop

# ç”ŸæˆæŠ¥å‘Š
/spark profiler open
```

è¿™ä¼šç”Ÿæˆä¸€ä¸ªç½‘é¡µé“¾æ¥,å¯ä»¥è¯¦ç»†æŸ¥çœ‹å“ªäº›æ’ä»¶ã€å®ä½“ã€åŒºå—å ç”¨äº†æœ€å¤šèµ„æºã€‚

---

### 4. å¤šæœåŠ¡å™¨ç®¡ç†(BungeeCord/Velocity)

å¦‚æœä½ æƒ³è¿è¡Œå¤šä¸ªæœåŠ¡å™¨(å¦‚å¤§å…ã€ç”Ÿå­˜ã€å°æ¸¸æˆ):

**ä½¿ç”¨Velocity**(æ¨è,ç°ä»£åŒ–):

1. ä¸‹è½½Velocity: https://papermc.io/downloads/velocity
2. åˆ›å»ºä¸»å¯åŠ¨è„šæœ¬:

```bash
#!/bin/bash

# å¯åŠ¨Velocityä»£ç†
cd /home/minecraft/velocity
screen -dmS velocity java -Xms512M -Xmx512M -jar velocity.jar

# å¯åŠ¨å¤§å…æœåŠ¡å™¨
cd /home/minecraft/lobby
screen -dmS lobby java -Xms2G -Xmx2G -jar server.jar nogui

# å¯åŠ¨ç”Ÿå­˜æœåŠ¡å™¨
cd /home/minecraft/survival
screen -dmS survival java -Xms4G -Xmx4G -jar server.jar nogui

echo "æ‰€æœ‰æœåŠ¡å™¨å·²å¯åŠ¨!"
screen -ls
```

---

### 5. ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦

**é¢„ç”Ÿæˆä¸–ç•Œ**:

ä½¿ç”¨Chunkyæ’ä»¶é¢„ç”Ÿæˆä¸–ç•Œå¯ä»¥é¿å…ç©å®¶æ¢ç´¢æ—¶çš„å¡é¡¿:

```
# åœ¨æ§åˆ¶å°æˆ–æ¸¸æˆä¸­æ‰§è¡Œ
chunky world world
chunky radius 5000
chunky start

# è¿™ä¼šé¢„ç”ŸæˆåŠå¾„5000æ ¼çš„ä¸–ç•Œ
```

**å¯ç”¨AlwaysPreTouch**:

åœ¨å¯åŠ¨å‚æ•°ä¸­æ·»åŠ :
```
-XX:+AlwaysPreTouch
```

è¿™ä¼šåœ¨å¯åŠ¨æ—¶é¢„å…ˆåˆ†é…å†…å­˜,é¿å…è¿è¡Œæ—¶åˆ†é…å¯¼è‡´çš„å¡é¡¿ã€‚

---

### 6. ä½¿ç”¨RAM Disk(ä»…é™è€æ‰‹æœä¸»)

å°†æœåŠ¡å™¨è¿è¡Œåœ¨å†…å­˜ä¸­å¯ä»¥æå¤§æå‡IOæ€§èƒ½:

**Linuxç‰ˆæœ¬**:
```bash
# åˆ›å»º4GBçš„RAM Disk
sudo mkdir /mnt/ramdisk
sudo mount -t tmpfs -o size=4G tmpfs /mnt/ramdisk

# å¤åˆ¶æœåŠ¡å™¨æ–‡ä»¶åˆ°RAM Disk
cp -r /home/minecraft/server/* /mnt/ramdisk/

# åœ¨RAM Diskä¸­è¿è¡ŒæœåŠ¡å™¨
cd /mnt/ramdisk
./start.sh
```

::: warning
RAM Diskä¸­çš„æ•°æ®åœ¨é‡å¯åä¼šä¸¢å¤±,éœ€è¦å®šæœŸå¤‡ä»½åˆ°ç¡¬ç›˜!
:::

---

### 7. Dockerå®¹å™¨åŒ–éƒ¨ç½²

ä½¿ç”¨Dockerå¯ä»¥ç®€åŒ–æœåŠ¡å™¨éƒ¨ç½²å’Œç®¡ç†:

åˆ›å»º `docker-compose.yml`:
```yaml
version: '3'
services:
  minecraft:
    image: itzg/minecraft-server
    ports:
      - "25565:25565"
    environment:
      EULA: "TRUE"
      TYPE: "PAPER"
      VERSION: "1.20.4"
      MEMORY: "4G"
    volumes:
      - ./data:/data
    restart: unless-stopped
```

è¿è¡Œ:
```bash
docker-compose up -d
```

## æ€»ç»“

### å¯åŠ¨è„šæœ¬æœ€ä½³å®è·µæ¸…å•

âœ… **å¿…åš**:
- [x] å§‹ç»ˆä½¿ç”¨å¯åŠ¨è„šæœ¬,ä¸è¦åŒå‡»jaræ–‡ä»¶
- [x] è®¾ç½®Xmså’ŒXmxä¸ºç›¸åŒå€¼
- [x] æ ¹æ®æœåŠ¡å™¨è§„æ¨¡åˆç†åˆ†é…å†…å­˜
- [x] ä½¿ç”¨æ¨èçš„åƒåœ¾å›æ”¶å™¨(G1GCæˆ–ZGC)
- [x] å®šæœŸå¤‡ä»½æœåŠ¡å™¨æ•°æ®
- [x] ç›‘æ§æœåŠ¡å™¨æ€§èƒ½,åŠæ—¶ä¼˜åŒ–

âŒ **é¿å…**:
- [ ] åˆ†é…è¶…è¿‡ç³»ç»Ÿ70%çš„å†…å­˜
- [ ] ä½¿ç”¨è¿‡æ—¶çš„GCå‚æ•°(å¦‚CMS)
- [ ] é¢‘ç¹ä¿®æ”¹å¯åŠ¨å‚æ•°(ç»™æ¯æ¬¡è°ƒæ•´è¶³å¤Ÿçš„æµ‹è¯•æ—¶é—´)
- [ ] å¿½ç•¥æœåŠ¡å™¨æ—¥å¿—ä¸­çš„è­¦å‘Š

### ä½ éœ€è¦è®°ä½çš„

å¯åŠ¨è„šæœ¬æ˜¯è¿è¡ŒMinecraftæœåŠ¡å™¨çš„åŸºç¡€,æŒæ¡å¥½å¯åŠ¨è„šæœ¬çš„é…ç½®å¯ä»¥è®©ä½ çš„æœåŠ¡å™¨æ€§èƒ½æå‡ä¸€ä¸ªæ¡£æ¬¡ã€‚

è®°ä½ä»¥ä¸‹è¦ç‚¹:
- **ä»ç®€å•å¼€å§‹**: å…ˆä½¿ç”¨åŸºç¡€è„šæœ¬,ç†Ÿæ‚‰åå†é€æ­¥ä¼˜åŒ–
- **ç†è§£å‚æ•°å«ä¹‰**: ä¸è¦ç›²ç›®å¤åˆ¶å‚æ•°,ç†è§£æ¯ä¸ªå‚æ•°çš„ä½œç”¨
- **ç›‘æ§å’Œè°ƒæ•´**: å®šæœŸæ£€æŸ¥æœåŠ¡å™¨æ€§èƒ½,æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´
- **å¤‡ä»½è‡³ä¸Š**: åœ¨ä¿®æ”¹é…ç½®å‰åŠ¡å¿…å¤‡ä»½

ç¥ä½ æ­å»ºæœåŠ¡å™¨é¡ºåˆ©,ç©å¾—å¼€å¿ƒ! ğŸ®

### å­¦ä¹ èµ„æºæ¨è

1. **å®˜æ–¹æ–‡æ¡£**:
   - Paperæ–‡æ¡£: [https://docs.papermc.io/](https://docs.papermc.io/)
   - Spigotæ–‡æ¡£: [https://www.spigotmc.org/wiki/](https://www.spigotmc.org/wiki/)

2. **æ€§èƒ½ä¼˜åŒ–**:
   - Aikar's Flags: [https://aikar.co/2018/07/02/tuning-the-jvm-g1gc-garbage-collector-flags-for-minecraft/](https://aikar.co/2018/07/02/tuning-the-jvm-g1gc-garbage-collector-flags-for-minecraft/)
   - Paperä¼˜åŒ–æŒ‡å—: [https://paper-chan.moe/paper-optimization/](https://paper-chan.moe/paper-optimization/)

3. **ç¤¾åŒºè®ºå›**:
   - MineBBS: [https://www.minebbs.com/](https://www.minebbs.com/)
   - SpigotMC Forums: [https://www.spigotmc.org/forums/](https://www.spigotmc.org/forums/)
   - SpigotMC Discord(éœ€ç§‘å­¦ä¸Šç½‘): [https://discord.gg/invite/spigotmc](https://discord.gg/invite/spigotmc)
   - PaperMC Forums: [https://forums.papermc.io/](https://forums.papermc.io/)
   - PaperMC Discord(éœ€ç§‘å­¦ä¸Šç½‘): [https://discord.gg/papermc](https://discord.gg/papermc)

4. **ç›¸å…³æ’ä»¶/å·¥å…·**:
   - Spark: [https://spark.lucko.me/](https://spark.lucko.me/)
   - Timings: [https://timings.aikar.co/](https://timings.aikar.co/)

## é™„å½•: å¿«é€Ÿå‚è€ƒ

### å¿«é€Ÿå¯åŠ¨è„šæœ¬æ¨¡æ¿

**Windows - å°å‹æœåŠ¡å™¨(2GB)**:
```batch
@echo off
java -Xms2G -Xmx2G -XX:+UseG1GC -jar server.jar nogui
pause
```

**Windows - ä¸­å‹æœåŠ¡å™¨(4GB)**:
```batch
@echo off
java -Xms4G -Xmx4G -XX:+UseG1GC -jar server.jar nogui
pause
```

**Linux - å°å‹æœåŠ¡å™¨(2GB)**:
```bash
#!/bin/bash
java -Xms2G -Xmx2G -XX:+UseG1GC -jar server.jar nogui
```

**Linux - ä¸­å‹æœåŠ¡å™¨(4GB)**:
```bash
#!/bin/bash
java -Xms4G -Xmx4G -XX:+UseG1GC -jar server.jar nogui
```

---

### æ•…éšœæ’æŸ¥é€ŸæŸ¥è¡¨

| é—®é¢˜ | æ£€æŸ¥é¡¹ | è§£å†³æ–¹æ¡ˆ |
|------|--------|----------|
| æ— æ³•å¯åŠ¨ | Javaæ˜¯å¦å®‰è£… | å®‰è£…Javaå¹¶é…ç½®ç¯å¢ƒå˜é‡ |
| å†…å­˜ä¸è¶³ | å†…å­˜åˆ†é…æ˜¯å¦åˆç† | å¢åŠ Xmxå€¼ |
| é¢‘ç¹å¡é¡¿ | TPSæ˜¯å¦ä½äº20 | ä¼˜åŒ–æ’ä»¶ã€å¢åŠ å†…å­˜ã€ä½¿ç”¨æ€§èƒ½åˆ†æå·¥å…· |
| å¯åŠ¨å³å´©æºƒ | æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ | æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®å¤(EULAã€ç«¯å£ã€Javaç‰ˆæœ¬ç­‰) |
| æ— æ³•è¿æ¥ | ç«¯å£æ˜¯å¦å¼€æ”¾ | é…ç½®é˜²ç«å¢™ã€æ£€æŸ¥è·¯ç”±å™¨ç«¯å£è½¬å‘ |